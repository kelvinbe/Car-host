# Folder structure
- This project was setup using the `create-next-app` template, so the base structure is the same as the one provided by the template. The following are the additional folders:

| Folder | Description |
| ------ | ----------- |
| cypress | Contains the cypress tests and related configuration files |
| jest | Contains some of the jest configuration files and mock data |
| .storybook | Contains the storybook configuration files and stories |
| test_utils | Shared resources between the jest and cypress tests such as test ids|

# Running the project
- To run the project, you can use the following commands:
  - `npm run dev` - Runs the project in development mode
  - `npm run build` - Builds the project for production
  - `npm run start` - Runs the project in production mode
  - `npm run test` - Runs the jest tests
  - `npm run test:watch` - Runs the jest tests in watch mode
  - `npm run cypress` - Opens the cypress test runner
  - `npm run cypress:run` - Runs the cypress tests in headless mode
  - `npm run storybook` - Runs the storybook
  - `npm run build-storybook` - Builds the storybook
  - `npm run electron:serve` - Runs web and desktop applications concurrently
  - `npm run electron:start` - Ensures control panel is running on port 3000 then starts the desktop application
  - `npm run electron:package` - Creates an executable bundle for target OS eg .exe on Windows
  - `npm run electron:dist` - Creates "distributables" from the executable bundles. This command packages and creates the distributables. Distributables are found in the /out/make folder
  - `npm run electron:publish` - Takes the distributable build artifacts from the Make step and uploads for distribution to your app's end users. Publishing is an optional step in the Electron Forge pipeline, since the artifacts from the Make step are already in their final format.


# How To Guides

## Swagger UI
- To add documentation to an api handler under the `/api` handler, all you have to do is write the documentation in `yaml` format within comments in the hadler file like below:
```ts
import type { NextApiRequest, NextApiResponse } from 'next'

type Data = {
  name: string
}

/**
 * @swagger
 * /api/hello:
 *   get:
 *     description: Returns the hello world
 *     responses:
 *       200:
 *         description: hello world
 */

export default function handler(
  req: NextApiRequest,
  res: NextApiResponse<Data>
) {
  res.status(200).json({ name: 'John Doe' })
}

```
you can then view this when you visit the `/api-docs` route.
![image](https://user-images.githubusercontent.com/58218526/203850115-506a0170-edac-4a21-8b52-b9ca4aa6a725.png)


## Working with mock server in code spaces
#### Setup
- ``ngrok`` comes installed on the workspace templates by default
- all you will need to do is to sign in with your ngrok token. Instructions on how to do so are outlined in [the ngrok dashboard](https://dashboard.ngrok.com/get-started/your-authtoken)
-----
- Once the repo has been cloned into your codespaces workspace, You'll first need to setup the env variables for both the mock server and the app. To do this, get a list of the env variables.
note there are two sets of them
- The first
  Meant for the web app, which will be placed in the root `.env.local` file

- The second
  Meant for the mock server, which will be placed in the `mock/.env` file

- after you are done setting those up, you will need to sign in to your ngrok account and coppy your auth token. You'll then paste it in the `mock/.env`file as the value of the `NGROK_AUTH_TOKEN` variable.

- Running the mock server
  - To run the mock server, you'll need to run the following commands in the terminal:
  - `npm run generate-db` to generate all the mock data
  - `npm run mock` to start the mock server up
- On running the mock server, you'll notice some descriptive text output in the terminal specifying a url to the mock server. Copy that url and paste it in the `NEXT_PUBLIC_API_DOMAIN` variable in the `.env.local` file.

#### Things to note
- The urls generated by ngrok are not static, so you'll need to update the `NEXT_PUBLIC_API_DOMAIN` variable in the `.env.local` file everytime you restart the mock server.

- You won't be able to work with the mock server in codespaces if you don't use ngrok.
